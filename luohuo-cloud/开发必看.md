# 本地开发：如何运行 HuLa（cloud）

## 前置条件（务必确认）

开发环境默认你已经安装并启动以下组件：

- **Nacos**：示例版本 `3.0.2`（Web 端口常见为 `8080`；老版本常见为 `8848`）
- **RocketMQ**
- **MySQL**
- **Redis**

> [!TIP]
> 如果你还没部署这些组件，请先看组件部署文档：[`redis、mysql、rocketmq、nacos一键部署.md`](../docs/install/docker/reids、mysql、rocketmq、nacos一键部署.md)。

> [!WARNING]
> 下面的执行顺序不要乱：安装 `luohuo-cloud` 时需要将 `src/main/filters` 里的配置打到 `target` 里。

## 启动步骤

1. 将 `luohuo-cloud/pom.xml` 导入 IDEA
2. 导入 `luohuo-util` 项目

![img.png](preview/img.png)
![img_1.png](preview/img_1.png)

1. 安装 `luohuo-util` 到本地 Maven 仓库

![img_2.png](preview/img_2.png)

1. 导入 Nacos 环境（示例：`127.0.0.1:8080`）

![img5.png](preview/img5.png)
![img_5.png](preview/img_5.png)

1. 修改配置：`redis.yml`、`mysql.yml`、`rocketmq.yml`、`luohuo-im-server.yml`

![img6.png](preview/img6.png)

1. 安装 `luohuo-cloud` 到本地 Maven 仓库

![img_3.png](preview/img_3.png)

1. 导入数据库（以你本地为准）
   - [`luohuo_dev.sql`](install/sql/luohuo_dev.sql)
   - [`luohuo_im_01.sql`](install/sql/luohuo_im_01.sql)

2. 启动并验证效果

![img7.png](preview/img7.png)

## 前端配置示例（访问地址）

```yaml
# src-tauri/configuration/local.yaml
database:
  sqlite_file: db.sqlite

backend:
  base_url: http://192.168.1.37:18760
  ws_url: ws://192.168.1.37:18760/ws/ws

youdao:
  app_key: ""
  app_secret: ""

tencent:
  api_key: ""
  secret_id: ""
  map_key: ""
```
